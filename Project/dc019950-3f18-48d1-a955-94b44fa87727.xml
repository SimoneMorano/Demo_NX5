<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//FB name: MC_Reset1S&#xD;
&#xD;
//Revision: 1.04&#xD;
//Library: &#xD;
//Namespace: OMR_CH_PP_Pos&#xD;
//Autor: S.M.&#xD;
//Changes:  UN 18.12.17 V1.07 new control of .done output same behaviour as PLCopen FB's&#xD;
&#xD;
// Function: Resett of 1S Drive   Setting Bit 7 in Controlword&#xD;
// Input/Output:&#xD;
//		AxisPar  -&gt; Axis structure of PP_Positioning&#xD;
// Input: &#xD;
//		Execute [BOOL]&#xD;
// Output:&#xD;
//		Done [BOOL]  finished successful activ only for one cycle&#xD;
&#xD;
CASE state OF&#xD;
	0:&#xD;
		Done:=FALSE;&#xD;
		ResetABit(Axis.ControlWord,7);&#xD;
		IF (Execute=TRUE)  THEN&#xD;
			SetABit(Axis.ControlWord,7);&#xD;
			state:= 3;&#xD;
		END_IF;&#xD;
		&#xD;
	3:&#xD;
		IF ((Axis.StatusWord AND WORD#2#0000_0000_0000_1000) = WORD#2#0000_0000_0000_0000) THEN   //Warten bis Alarm quittiert wurde Bit3 auf 0 geht&#xD;
			Done:=TRUE;&#xD;
			state:= 10;&#xD;
		ELSIF (Execute=FALSE)  THEN&#xD;
				state:= 0;&#xD;
		END_IF;&#xD;
	10:&#xD;
		Done:=FALSE;&#xD;
		IF  (Execute=FALSE)  THEN&#xD;
				state:= 0;&#xD;
		END_IF;&#xD;
END_CASE;		</Text></StructuredTextModel>